# 데이터의 특징을 대략적으로 파악하자!_ 평균과 분산 + 시각화


```python
import numpy as np
import pandas as pd

# Jupyter Notebook의 출력을 소수점 이하 3자리로 제한
%precision 3

# Dataframe의 출력을 소수점 이하 3자리로 제한
pd.set_option('precision', 3)
```



![스크린샷 2023-07-09 오후 4 44 17](https://github.com/hozyhozy/Statistics/assets/123252821/1293a8d7-8f16-46ac-b7cb-3d7cc9695eda)





### 2.1 데이터 중심


데이터를 하나의 값으로 요약해보자 = 대푯값



#### 2.1.1. 평균값

```python
# 여기서 scores는 numpy의 array형태
sum(scores)/ len(scores)

np.mean(scores)

#여기서 scores_df는 데이터 프레임 --> Series형태
scores_df.mean()
```




#### 2.1.2. 중앙값

> 평균값에 비해 이상치에 강하다


>짝수개인 경우 가운데 2개의 값의 평균이 중앙값이다. [1,2,3,4,5,6]의 경우 3+4의 평균 3.5가 중앙값이 된다. 
>> 즉, 데이터 개수 n이 홀수라면, (n+1)/2 번째 데이터가 중앙값이다.
>>
>> 
>> 데이터 개수 n이 짝수라면, n/2 와 n/2+1 번째의 평균이 중앙값이다.


```python

# 우선 정렬
sorted_scores = np.sort(scores)

#직접 식으로 쓰면!
n = len(sorted_scores)
if n % 2 == 0: #짝수일때 
    m0 = sorted_scores[n//2 - 1]
    m1 = sorted_scores[n//2]
    median = (m0 + m1) / 2
else: #홀 수 일때
    median = sorted_scores[(n+1)//2 - 1]
median

# numpy
np.median(scores)

#pandas
scores_df.median()
```




#### 2.1.3. 최빈값


> 데이터에서 가장 많이 나오는 값


```python

pd.Series([1, 1, 1, 2, 2, 3]).mode()   # 결과값은 1
```


### 2.2 데이터의 산포도 지표
> 점수가 흩어져 있는 정도를 알고 싶다!


#### 2.2.1. 분산과 표준편차

--------------------

> **편차란?** 각 데이터가 평균으로부터 어느정도 떨어져 있는가를 나타내는 지표



```python

# Numpy에서는 브로드캐스트 기능을 지원한다. 브로드캐스팅이란? 배열과 하나의 숫자와의 조합으로 이루어진 산술 연산을 수행하는 기능.

mean = np.mean(scores)
deviation = scores - mean


```


> **편찻값이 여러개라서 비교하기 어렵기 때문에 편차의 평균을 대푯값으로 선택한다면?**
> > 편차의 평균은 0이 되기 때문에 안됩니다!



![스크린샷 2023-07-09 오후 5 03 46](https://github.com/hozyhozy/Statistics/assets/123252821/b64933e1-b761-41b8-a579-d4512126c750)


-------------------------

> **분산이란?** 편차의 평균이 0으로 수렴하기 때문에 편차를 제곱시킨값의 평균

```python

np.mean(deviation ** 2)
np.var(scores)
scores_df.var()
```
**여기서 pandas와 Numpy의 var값이 다른데 그이유는 numpy는 표본분산을 사용하고 pandas는 불편분산을 사용하기 때문***
> ddof=0을 판다스에 입력해주면 numpy와 같은 값을 얻을 수 있음. 불편분산은 ddof=1



![스크린샷 2023-07-09 오후 5 15 50](https://github.com/hozyhozy/Statistics/assets/123252821/1d87b255-978a-47dd-87e7-dc311fcfe211)



> 여기서 가운데 선은 각 score의 평균을 나타내고, 초록 박스는 평균, 회색 박스는 분산이라고 볼 수 있다.


--------------------------



> **표준편차란?** 편차를 제곱시킨 값을 원상복귀 시킨 값! --> 원래의 데이터와 동일한 단위를 쓰기 위해서

```python
np.sqrt(np.var(scores, ddof=0))
np.std(scores, ddof=0)
```


![스크린샷 2023-07-09 오후 5 20 58](https://github.com/hozyhozy/Statistics/assets/123252821/ac84b710-6fcd-48aa-9b23-9fff8974d01f)


> 여기에서 가장 진하게 색칠된 곳이 평균 +- 표준편차구간이다. : 1시그마구간
>
> 
> 다음으로 진하게 색칠된 곳이 평균 +- 2*표준편차구간이다. : 2시그마구간
>
> 
> 다음으로 가장 연하게 색칠된 곳이 평균 +- 3*표준편차구간이다. : 3시그마구간


#### 2.2.2. 범위와 사분위 범위

> **범위는** 최댓값 - 최솟값으로 데이터 전체를 보는 것이 아니라 이상치에 민감하다
>
> 
>  **사분위 범위는** 상위수%, 하위수% 위치하는 값의 차이를 취하는 방법 (범위에서 한단계 더 나아간 형태)
> 
>> 사분위 범위: 하위 25%(Q1), 50%(Q2), 75%(Q3)로 **IQR = Q3-Q1**



```python
np.max(scores) - np.min(scores)

# 4분위수
scores_Q1 = np.percentile(scores, 25)
scores_Q3 = np.percentile(scores, 75)
scores_IQR = scores_Q3 - scores_Q1
scores_IQR
```


> IQR에서는 Q2를 사용하지 않는다 그 이유는 Q2는 중앙값을 의미하기 때문


>> **즉, 평균의 산포도 지표는 분산, 중앙값의 산포도 지표는 IQR이다.**


#### 2.2.3. 데이터의 지표정리_ describe() 를 사용하자!



```python
pd.Series(scores).describe()
```



### 2.3 데이터의 정규화


> 데이터의 상대적인 위치 관계를 알 수 있는 지표가 필요해! --> 정규화 시켜주자!


#### 2.3.1. 표준화

>> 데이터 값에서 평균값을 빼고 편차로 나눠준다면?! --> Z-score


```python
z = (scores - np.mean(scores)) / np.std(scores) #결과는 평균 0 편차 1
```


> **표준화된 데이터는 단위를 쓰지 않는다는 사실에 주의하자**



#### 2.3.2. 편찻값

>편찻값은 평균이 50, 표준편차가 10이 되도록 정규화한 값을 말함


>> Z-score = 50+10*((x-mean(x))/S)


```python
z = 50 + 10 * (scores - np.mean(scores)) / np.std(scores)
```

